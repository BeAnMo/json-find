var JsonFind=function(){"use strict";function t(){this.q=[],this.L=0}function e(t){return Array.isArray(t)}function n(t){return e(t)||function(t){return"object"==typeof t&&!e(t)&&null!==t}(t)}function o(t,e="."){return t.split(e)}function i(e){this.docInstance=e,this.delim=e.options.delimeter,this.q=new t,this.setQueue("",Object.keys(e.doc))}function s(t,e={}){this.options={delimeter:e.delimeter||".",useConstructor:e.useConstructor||!1},this.doc=t}return t.prototype.push=function(t){return this.L=this.q.push(t),this},t.prototype.pop=function(){const[t,...e]=this.q;return this.q=e,this.L>0&&(this.L-=1),t},t.prototype.empty=function(){return 0===this.L},i.prototype.setQueue=function(t,e){return e.forEach((e=>{const n=`${t}${e}`;this.q.push(n)})),this},i.prototype.getCurrentKey=function(t){return(e=o(t,this.delim))[e.length-1];var e},i.prototype.getAtPath=function(t){return this.docInstance.getAt(t,{noInstance:!0})},i.prototype.next=function(){const t=this.q.pop(),e=this.getAtPath(t);return n(e)?(this.setQueue(`${t}${this.delim}`,Object.keys(e)),this.next()):{path:t,value:e,key:this.getCurrentKey(t)}},i.prototype.empty=function(){return this.q.empty()},s.prototype.getAt=function(t,e={}){const i=e.useConstructor||this.options.useConstructor,r=o(t,this.options.delimeter);let u=this.doc,c=0;for(;void 0!==r[c]&&(u=u[r[c]],void 0!==u);)c++;return n(u)&&i?new s(u,this.options):u},s.prototype.setAt=function(t,e){const n=o(t,this.options.delimeter);let i=this.doc,s=0;for(;void 0!==n[s+1];){const t=n[s];i=void 0===i[t]?i[t]=isNaN(n[s+1])?{}:[]:i[t],s++}return i[n[s]]=e,this},s.prototype.each=function(t){const e=new i(this);for(;!e.empty();)t.call(this,e.next())},s.prototype.prune=function(t){const e=new i(this),n=new s({},this.options);for(;!e.empty();){const o=e.next();t.call(this,o)&&n.setAt(o.path,o.value)}return n},s}();
